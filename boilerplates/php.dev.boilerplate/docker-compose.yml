version: "3"
services:
  web:
    image: canals/php
    container_name: web
    environment:
      - VHOST_HOSTNAME=web.local
      - VHOST_DOCROOT=/var/www/web
    ports:
      - "5080:80"
      - "5543:443"
    volumes :
      - ./web:/var/www/web
      - ./src:/var/www/src
      - ./html:/var/www/html
    links :
      - mysql:db

  api:
      image: canals/php
      container_name: api
      environment:
        - VHOST_HOSTNAME=api.local
        - VHOST_DOCROOT=/var/www/api
      ports:
        - "6080:80"
        - "6443:443"
      volumes :
        - ./api:/var/www/api
        - ./src:/var/www/src
        - ./html:/var/www/html
      links :
        - mysql:db

  mysql:
    image: mysql:5.6
    container_name: mysql
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_USER=user
      - MYSQL_PASSWORD=user
    ports:
      - "3603:3306"

  adminer:
     image: adminer
     ports:
       - "8080:8080"
     links:
       - mysql:db
